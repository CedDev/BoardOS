<div ng-include="'components/navbar/navbar.html'"></div>
<div class="row">
  <div class="col-md-2 col-sm-4"></div>
  <div class="col-md-10 col-sm-8">
    <a class="anim-btn" href="/dashboard/">
      <span class="anim-btn-text">Create a new Dashboard</span>
      <span class="anim-btn-slide-text">with new context and activity</span>
      <span class="anim-btn-icon-right">
        <span>
          <i class="fa fa-2x fa-cog fa-spin fa-fw" aria-hidden="true"></i>
        </span>
      </span>
    </a>
    <span class="bottom-align-text">
      or add an existing one below <small class="text-muted" style="margin-left:15px;">(you can use filter on your right to find more easily)</small>
    </span>
  </div>
</div>
<!--* Modal Part-->
<div style="padding:15px;">

</div>
<div class="row">
  <div class="portlet">
    <div class="portlet-title">
      <div class="caption">
        <i class="fa fa-dashboard"></i>Dashboards List
      </div>
      <div class="pull-right">
        Filter by Name, Context or Activity :
        <input style="width:200px" ng-model="searchText">
      </div>
    </div>
    <div class="portlet-body">
      <table class="table table-striped table-bordered table-hover" id="sample_4">
        <thead>
          <tr>
            <th >
              <i class="fa fa-question-sign"></i>
            </th>
            <th style="width:60%">
              <i class="fa fa-briefcase"></i>Name
            </th>
            <th class="hidden-xs" style="width:20%">
              <i class="fa fa-question-sign"></i>
              Activity
            </th>
            <th class="hidden-xs" style="width:20%">
              <i class="fa fa-question-sign"></i>
              Context
            </th>
            <th>
              <i class="fa fa-bookmark"></i>
              Action
            </th>
            <th ng-if="isAdmin">
              <i class="fa fa-delete"></i>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="dashboard in dashboards | orderBy:'name' | filter:filter()" ng-if="dashboard.owner._id === currentUser._id">
            <td>
              <div popover-html-unsafe="Name : <b>{{dashboard.owner.name}}</b> </br> Role : <b>{{dashboard.owner.role}}</b> " popover-trigger="mouseenter" popover-title="Owner Identity" popover-placement="right">
                <img alt="" ng-src="assets/images/avatars/{{dashboard.owner._id}}.png" class="img-circle" err-src="assets/images/avatars/avatar.png"/>
              </div>
            </td>
            <td >
              <a href="/dashboard/{{dashboard._id}}">{{dashboard.name}}</a>
            </td>
            <td class="hidden-xs">
              {{dashboard.activity || 'ALL'}}
            </td>
            <td class="hidden-xs">
              {{dashboard.context || 'ALL'}}
            </td>
            <td>
              <div >Already Yours</div>
            </td>
            <td>
              <button class="btn btn-danger" ng-click="delete(dashboard,$index)">Delete</button>
            </td>
          </tr>
          <tr ng-repeat="dashboard in dashboards | orderBy:'name' | filter:filter()" ng-if="dashboard.owner._id !== currentUser._id">
            <td>
              <div popover-html-unsafe="Name : <b>{{dashboard.owner.name}}</b> </br> Role : <b>{{dashboard.owner.role}}</b> " popover-trigger="mouseenter" popover-title="Owner Identity" popover-placement="right">
                <img alt="" ng-src="assets/images/avatars/{{dashboard.owner._id}}.png" class="img-circle" err-src="assets/images/avatars/avatar.png"/>
              </div>
            </td>
            <td >
              <a href="/dashboard/{{dashboard._id}}">{{dashboard.name}}</a>
            </td>
            <td class="hidden-xs">
              {{dashboard.activity || 'ALL'}}
            </td>
            <td class="hidden-xs">
              {{dashboard.context || 'ALL'}}
            </td>
            <td>
              <button class="btn btn-primary" ng-click="pinDashboard(dashboard)" >Add to myDashboards</button>
            </td>
            <td ng-if="isAdmin">
              <button class="btn btn-danger" ng-click="delete(dashboard,$index)">Delete</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
